# Use an Ubuntu 18.04 base for our staging server
FROM vm/ubuntu:18.04

# Install Python
RUN apt-get update && apt-get install -y python3

# Install the required Node.js version
RUN curl -sL https://deb.nodesource.com/setup_18.x | bash - && \
    apt-get install -y nodejs

# Verify the installation
RUN node -v && npm -v

# Install Jest and Puppeteer
RUN npm install -g jest@latest puppeteer@latest

# Create some files
RUN echo '<b>some html</b>' > hello.html
RUN echo '<b>another file</b>' > another.html

# Copy the repository contents
COPY . .

# Expose a Python simple server
RUN BACKGROUND python3 -m http.server 80
EXPOSE WEBSITE http://localhost:80
