# Use an Ubuntu 18.04 base for our staging server
FROM vm/ubuntu:18.04

# Install Node.js and npm
RUN apt-get update && apt-get install -y nodejs npm

# Install Python and other dependencies
RUN apt-get install -y python3 python3-pip

# Install testing libraries
RUN npm install --global jest puppeteer

# Copy the repository contents to the VM
COPY . .

# Run JavaScript tests
RUN jest

# Optional: Start the server in the background if still needed
RUN BACKGROUND python3 -m http.server 80
EXPOSE WEBSITE http://localhost:80

